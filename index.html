<html>
<head>
<meta charset="UTF-8">
<title>【 公式 】こねこprojec</title>
<link rel="icon" href="KonekoP.ico">
</head>
<body bgcolor="#c9c9c9" background="xxxx.png">

<h1><center><span style="background-color:white">Minecraft　参加申請</span></center></h1>
<font size="6">★　ＭＥＮＵ　★</font><a href="https://konekoP.github.io/top/"><img src="modoru.png" alt="あれ？"></a><br>
<a href="https://konekoP.github.io/youtube/"><img src="YouTub.png" alt="あれ？"></a><a href="https://konekoP.github.io/twitter_X/"><img src="Twitter.png" alt="あれ？"></a><br>
<a href="https://discord.gg/6MZshApj6A"><img src="Discord.png" alt="あれ？"></a><a href="https://konekoP.github.io/konekotyan_top/"><img src="konekotyan_top.png" alt="あれ？"></a><br>
<a href="https://konekoP.github.io/mcban/"><img src="mcban.png" alt="あれ？"></a><a href="https://konekoP.github.io/mcaddon/"><img src="mcaddon.png" alt="あれ？"></a><br>
<br>
<form action="投稿処理のURL" method="post">
  <label for="name">名前:</label>
  <input type="text" name="name" id="name">
  <br>
  <label for="comment">コメント:</label>
  <textarea name="comment" id="comment"></textarea>
  <br>
  <input type="submit" value="投稿">
</form>

<div id="posts">
</div>
<?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  $name = $_POST['name'];
  $comment = $_POST['comment'];
  $time = date('Y-m-d H:i:s');
  $post = $time . ' - ' . $name . ': ' . $comment . "\n";
  file_put_contents('posts.txt', $post, FILE_APPEND);
  header('Location: ' . $_SERVER['REQUEST_URI']);
  exit;
}
?>
<?php
$posts = file_get_contents('posts.txt');
$posts = nl2br(htmlspecialchars($posts, ENT_QUOTES, 'UTF-8'));
?>

<div id="posts">
  <?= $posts ?>
</div>

<?php
$posts_per_page = 5;
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$offset = ($page - 1) * $posts_per_page;

$posts_data = file('posts.txt');
$total_posts = count($posts_data);
$total_pages = ceil($total_posts / $posts_per_page);

$posts_data = array_slice($posts_data, $offset, $posts_per_page);
?>

<div id="posts">
  <?php foreach ($posts_data as $post): ?>
    <div class="post">
      <?= nl2br(htmlspecialchars($post, ENT_QUOTES, 'UTF-8')) ?>
    </div>
  <?php endforeach; ?>
</div>

<div id="pagination">
  <?php for ($i = 1; $i <= $total_pages; $i++): ?>
    <?php if ($i === $page): ?>
      <span><?= $i ?></span>
    <?php else: ?>
      <a href="?page=<?= $i ?>"><?= $i ?></a>
    <?php endif; ?>
  <?php endfor; ?>
</div>

<br>
<h4><center><span style="background-color:white">こねこP公式サイト編集部  2023 - 2024</span></center></h4><br>

</body>
</html>